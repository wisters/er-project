b# Руководство по стилю проекта

*Наиболее разумных подход к Unreal Engine 5*

> **Замечание**: Многие термины будут называться на английском языке.


## Оглавление


## Основные термины:

##### Карта / Уровень ( Map / Level )
Слово "Карта" взаимозаменяемо со словом "Уровень" </br>
Терминология: [Тык](https://ru.wikipedia.org/wiki/%D0%A3%D1%80%D0%BE%D0%B2%D0%B5%D0%BD%D1%8C_(%D0%B8%D0%B3%D1%80%D1%8B))

##### иИдентификаторы
Идентификатор — это все, что напоминает или служит «именем». Например, имя актива или имя материала позже, или свойство чертежа, переменная или имя папки, или имя строки таблицы данных и т. д.

##### Стили:
Есть несколько способов, как называть вещи. Вот несколько из них:
> ###### ДельфиСтиль
>
> Каждое слово начинается с большой буквы, а всё слово пишется без пробелов, нижних пробелов, дефисов и т.п. Например: `DesertEagle`, `StyleGuide`, `ASeriesOfWords`.
> 
> ###### верблюжийСтиль
>
> Похож на ДельфиСтиль, но первая буква пишется в нижнем регистре. Например: `desertEagle`, `styleGuide`, `aSeriesOfWords`.
>
> ###### Змеиный_стиль (а.к.а. snake_case)
>
> Использование регистра в начале слов не определено, но слова разделяются нижним пробелом. Например: `desert_Eagle`, `Style_Guide`, `a_Series_of_Words`.

# 0. Принципы
### 0.1 Если в вашем проекте UE4 уже используется руководство стиля, вы должны следовать ему

Если вы работаете над существующим проектом, или в команде, которая уже использует руководство стиля, вы должны ему (руководству) следовать. Во всех различиях между имеющимся и новым руководством стиля приоритет отдаётся имеющемуся.

Руководство по стилю, при этом, постоянно меняющийся документ, и рекомендуется предлагать вносить правки в ваше имеющееся руководство по стилю (и в этот документ), если это принесёт реальную пользу сообществу UE.

> #### "Споры по поводу стиля не имеют смысла. Должно быть руководство по стилю, а вы должны следовать ему".
> [_Rebecca Murphey_](https://rmurphey.com)
### 0.2 Вся структура проекта, материалы для разработки, код в любом Unreal Engine 4 проекте должны выглядеть так, будто всё это создано одним человеком — не важно, как много людей на самом деле участвует

Смена проекта не должна требовать от вас переучиваться под новый стиль и структуру. Использование руководства по стилю избавит вас от гадания на кофейной гуще и неопределённости.

Также, руководство по стилю улучшает продуктивность создателей контента и управляемость проектом, т.к. каждому не требуется думать о стиле — достаточно просто воспользоваться руководством. Это руководство по стилю разрабатывается с учётом лучших практик, и его использование снизит частоту появления трудно отслеживаемых проблем.

### 0.3 Мы помогаем друзьям следовать хорошему стилю

Если вы видите, что кто-то работает не по вашему руководству стиля, или вовсе без какого-либо — объясните это тому человеку.

При работе в комаде и во время обсуждений в духе [Unreal Slackers (EN)](http://join.unrealslackers.org/) постоянство стиля также помогает быстро найти отклик на свою проблему. Никому не хочется рыться в макаронах блюпринтов и изучать непонятные названия материалов для разработки.

Если вы помогаете тому, кто следует другому, но постоянному и понятному руководству стиля, вы сможете к нему адаптироваться. Если вы увидили, что этот кто-то не следует какому-либо руководству стиля, отправьте ему ссылку на этот документ.

### 0.4 Команда без руководства стиля — не моя команда 

Одним из первых ваших вопросах при вступлении в команду разработчиков на UE4 должен быть "У вас есть руководство стиля?" Если его нет, то следует с подозрением относиться ко способности этих людей работать в команде.

## 1. Соглашение о наименованиях ![#](https://img.shields.io/badge/lint-partial_support-yellow.svg)

Соглашение о наименованиях должно восприниматься как закон. В проекте, следующем соглашению о наименованиях, легко управлять ассетами, искать и обрабатывать их.

В большинстве случаев, ассетам присваивается префикс-аббревиатура на основе названия типа этого ассета + нижний пробел `_`.

<a name="prohibited-languages"></a>
<a name="1.0"></a>
### 1.0 Русский и иные языки (от переводчика)
Использование русских и иных языков в названиях ассетов строго запрещается. Нет ничего хуже, чем пытаться понять проект с французскими названиями, когда вы не владеете таким языком. Точно так же будет плохо зарубежным друзьям при разборе вашего проекта.

Такие проекты нельзя будет передавать лицам из других стран, когда вам потребуется помощь. Также, не-латинские символы могут вызвать ошибки при компиляции, преобразовании и в ходе других внутренних процессов UE4 и сторонних плагинов — такие ошибки будет трудно отловить и исправить, так что лучше не делайте их вообще.

*Не бойтесь пользоваться переводчиком*. Лучше чудаковатое название на английском, нежели написанное транслитом слово `Pchela`, или, того хуже, так и оставленное на русском `Пчела`.

<a name="base-asset-name"></a>
<a name="1.1"></a>
### 1.1 Базовое название - `Префик_БазовоеНазвание_Вариант_Суффикс` ![#](https://img.shields.io/badge/lint-partial_support-yellow.svg)

У каждого ассета должно быть своё _базовое название_. Оно используется как средство логической группировки материалов разработки. Любой ассет, являющийся частью определённой логической группы, должен следовать стандарту  `Префик_БазовоеНазвание_Вариация_Суффикс`.

Использование схемы `Префик_БазовоеНазвание_Вариация_Суффикс` с её осознанием уже гарантирует создание "хороших" имён. Вот подробные правила по использованию этой схемы:

* `Префикс` и `Суффикс` определяется типом ассета, исходя из таблиц [Модификаторов имён ассетов](#asset-name-modifiers).
* `Базовое название` определяется коротким и легко отличимым названием касательно предметной области вашей группы ассетов. Например, если у вас есть персонаж Вася, то все ассеты Васи должны содержать `БазовоеНазвание` = `Vasya`.
* Для особенных или уникальных вариантов ассета используйте `Вариант` — короткое и легко различимое имя, отражающее логическую группировку ассетов, образующих подмножество на основе базового имя ассета. Например, если у Васи есть несколько скинов, то у этих скинов должно быть всё то же базовое имя `Vasya`, но также и `Вариант`. "Злой" скин можно назвать `Vasya_Evil`, а скин "Ретро"— `Vasya_Retro`.
* Для уникальных но схожих ассетов, относящихся к одной группе, добавляется нумерующий `Вариант` — двузначное число, нумерация которого начинается с `01`. Например, если ваш художник окружения генерирует валуны, которые нельзя просто так взять и назвать, то их можно назвать как `Rock_01`, `Rock_02`, `Rock_03`, и т.д. За исключением редких случаев, не используйте трёхзначное число. Если у вас более 100 ассетов в одной группе, вам следует разбить её на несколько других, используя другие базовые названия или варианты.
* В зависимости от того, как у вас создаются ассеты, вы можете использовать несколько имён-вариантов, друг за другом. Например, если вы создаёте ассеты для пола, вам будет нужно использовать базовое имя `Flooring` с вариантами вроде `Flooring_Marble_01`, `Flooring_Maple_01`, `Flooring_Tile_Squares_01`.

<a name="1.1-examples"></a>
#### 1.1 Примеры

##### 1.1e1 Вася

| Тип ассета (RU)          |Тип ассета (EN)           | Название ассета                |
| ------------------------ | ------------------------ | ------------------------------ |
| Скелетный меш            | Skeletal Mesh            | SK_Bob                         |
| Материал                 | Material                 | M_Bob                          |
| Текстура (Diffuse/Albedo)| Texture (Diffuse/Albedo) | T_Bob_D                        |
| Текстура (Normal)        | Texture (Normal)         | T_Bob_N                        |
| Текстура (Злой Diffuse)  | Texture (Злой Diffuse)   | T_Bob_Evil_D                   |

##### 1.1e2 Валуны

| Тип ассета (RU)           | Тип ассета (EN)         | Название ассета                |
| ------------------------- | ----------------------- | ------------------------------ |
| Статичный меш (01)        | Static Mesh (01)        | S_Rock_01                      |
| Статичный меш (02)        | Static Mesh (02)        | S_Rock_02                      |
| Статичный меш (03)        | Static Mesh (03)        | S_Rock_03                      |
| Материал                  | Material                | M_Rock                         |
| Экземпляр материала (Снег)| Material Instance (Snow)| MI_Rock_Snow                   |

### 1.2 Модификаторы имён ассетов ![#](https://img.shields.io/badge/lint-supported-green.svg)

Используйте эти таблицы наряду с [базовым названием](#base-asset-name), когда именуете ассеты.

#### Подразделы

> 1.2.1 [Часто используемые](#anc-common)
> 1.2.2 [Анимация](#anc-animations)
> 1.2.3 [Искусственный интеллект](#anc-ai)
> 1.2.4 [Блупринты](#anc-bp)
> 1.2.5 [Материалы](#anc-materials)
> 1.2.6 [Текстуры](#anc-textures)
> 1.2.7 [Разное](#anc-misc)
> 1.2.8 [Paper 2D](#anc-paper2d)
> 1.2.9 [Физика](#anc-physics)
> 1.2.10 [Звуки](#anc-sound)
> 1.2.11 [Графический интерфейс пользователя](#anc-ui)
> 1.2.12 [Эффекты](#anc-effects)
<a name="anc-common"></a>
<a name="1.2.1"></a>
#### 1.2.1 Часто используемые ![#](https://img.shields.io/badge/lint-supported-green.svg)

| Тип ассета (RU)      | Тип ассета (EN)    | Префикс      | Суффикс    | Примечания                          |
| -------------------- | ------------------ | ------------ | ---------- | ----------------------------------- |
| Карта / уровень      | Level / Map        |              |            | [Должны быть в папке `Maps`.](#2.3) |
| Уровень (постоянный) | Level (Persistent) |              | _P         |                                     |
| Уровень (аудио)      | Level (Audio)      |              | _Audio     |                                     |
| Уровень (освещение)  | Level (Lighting)   |              | _Lighting  |                                     |
| Уровень (геометрия)  | Level (Geometry)   |              | _Geo       |                                     |
| Уровень (геймплей)   | Level (Gameplay)   |              | _Gameplay  |                                     |
| Блупринт             | Blueprint          | BP_          |            |                                     |
| Материал             | Material           | M_           |            |                                     |
| Статичный меш        | Static Mesh        | S_ или SM_   |            | Выберите одно. Лучше S_.            |
| Скелетный меш        | Skeletal Mesh      | SK_          |            |                                     |
| Текстура             | Texture            | T_           | _?         | См. [Текстуры](#anc-textures)       |
| Система частиц       | Particle System    | PS_          |            |                                     |
| Виджет-блупринт      | Widget Blueprint   | WBP_ или WB_ |            | Выберите одно. Лучше WBP_.          |

<a name="anc-animations"></a>
<a name="1.2.2"></a>
#### 1.2.2 Анимация ![#](https://img.shields.io/badge/lint-supported-green.svg)

| Тип ассета (RU)             | Тип ассета (EN)       | Префикс    | Суффикс    | Примечания               |
| --------------------------- | --------------------- | ---------- | ---------- | ------------------------ |
| Сдвиг прицела               | Aim Offset            | AO_        |            |                          |
| Сдвиг прицела 1D            | Aim Offset 1D         | AO_        |            |                          |
| Блюпринт анимации           | Animation Blueprint   | ABP_       |            |                          |
| Композиция анимации         | Animation Composite   | AC_        |            |                          |
| Монтаж анимации             | Animation Montage     | AM_        |            |                          |
| Последовательность анимаций | Animation Sequence    | A_ or AS_  |            | Выберите одно. Лучше A_. |
| Пространство смешивания     | Blend Space           | BS_        |            |                          |
| Пространство смешивания 1D  | Blend Space 1D        | BS_        |            |                          |
| Последовательность уровня   | Level Sequence        | LS_        |            |                          |
| Точка смешивания            | Morph Target          | MT_        |            |                          |
| Paper Flipbook              | Paper Flipbook        | PFB_       |            |                          |
| Риг                         | Rig                   | Rig_       |            |                          |
| Скелетный меш               | Skeletal Mesh         | SK_        |            |                          |
| Скелет                      | Skeleton              | SKEL_      |            |                          |

<a name="anc-ai"></a>
<a name="1.2.3"></a>
### 1.2.3 Искусственный интеллект ![#](https://img.shields.io/badge/lint-supported-green.svg)

| Тип ассета (RU)         | Тип ассета (EN)   | Префикс      | Суффикс    | Примечания |
| ----------------------- | ----------------- | ------------ | ---------- | ---------- |
| ИИ контроллер           | AI Controller     | AIC_         |            |            |
| Дерево поведений        | Behavior Tree     | BT_          |            |            |
| Доска состояний         | Blackboard        | BB_          |            |            |
| Декторатор              | Decorator         | BTDecorator_ |            |            |
| Сервис                  | Service           | BTService_   |            |            |
| Задание                 | Task              | BTTask_      |            |            |

<a name="anc-bp"></a>
<a name="1.2.4"></a>
### 1.2.4 Блупринты ![#](https://img.shields.io/badge/lint-supported-green.svg)

| Тип ассета (RU)             | Тип ассета (EN)            | Префикс       | Суффикс | Примечания                       |
| --------------------------- | -------------------------- | ------------- | ------- | -------------------------------- |
| Блупринт                    | Blueprint                  | BP_           |         |                                  |
| Библиотека блупринт-функций | Blueprint Function Library | BPFL_         |         |                                  |
| Блупринт-интерфейс          | Blueprint Interface        | BPI_          |         |                                  |
| Библиотека бупринт-макросов | Blueprint Macro Library    | BPML_         |         | По возможности не используйте библиотеки макросов вообще |
| Перечисление                | Enumeration                | E             |         | Без нижнего пробела              |
| Структура                   | Structure                  | F или S       |         | Без нижнего пробела              |
| Блупринт-виджет             | Widget Blueprint           | WBP_ или WB_ |         | Выберите одно. Лучше WBP_        |

<a name="anc-materials"></a>
<a name="1.2.5"></a>
### 1.2.5 Материалы ![#](https://img.shields.io/badge/lint-supported-green.svg)

| Тип ассета (RU)               | Тип ассета (En)               | Префикс      | Суффикс | Примечания                |
| ----------------------------- | ----------------------------- | ------------ | ------- | ------------------------- |
| Материал                      | Material                      | M_           |         |                           |
| Материал пост-обработки       | Material (Post Process)       | PP_          |         |                           |
| Функция материалов            | Material Function             | MF_          |         |                           |
| Экземпляр материала           | Material Instance             | MI_          |         |                           |
| Материал Parameter Collection | Material Parameter Collection | MPC_         |         |                           |
| Профиль подповерхности        | Subsurface Profile            | SP_ или SSP_ |         | Выберите одно. Лучше SP_ |
| Физический материал           | Physical Materials            | PM_          |         |                           |

<a name="anc-textures"></a>
<a name="1.2.6"></a>
### 1.2.6 Текстуры ![#](https://img.shields.io/badge/lint-supported-green.svg)

| Тип ассета (RU)                  | Тип ассета (EN)             | Префикс      | Суффикс    | Примечания                       |
| -------------------------------- | --------------------------- | ------------ | ---------- | -------------------------------- |
| Текстура                         | Texture                     | T_           |            |                                  |
| Текстура (Diffuse/Альбедо/Основной цвет)| Texture (Diffuse/Albedo/Base Color)| T_ | _D      |                                  |
| Текстура (Нормаль)               | Texture (Normal)            | T_           | _N         |                                  |
| Текстура (Грубость)              | Texture (Roughness)         | T_           | _R         |                                  |
| Текстура (Alpha/Прозрачность)    | Texture (Alpha/Opacity)     | T_           | _A         |                                  |
| Текстура (Нейтральный свет)      | Texture (Ambient Occlusion) | T_           | _O или _AO | Выберите одно. Лучше _O          |
| Текстура (Неровность)            | Texture (Bump)              | T_           | _B         |                                  |
| Текстура (Излучение)             | Texture (Emissive)          | T_           | _E         |                                  |
| Текстура (Маска)                 | Texture (Mask)              | T_           | _M         |                                  |
| Текстура (Блеск)                 | Texture (Specular)          | T_           | _S         |                                  |
| Текстура (упакованная)           | Texture (Packed)            | T_           | _*         | См. примечание об [упаковке текстур](#anc-textures-packing). |
| Текстура-куб                     | Texture Cube                | TC_          |            |                                  |
| Текстура-медиа                   | Media Texture               | MT_          |            |                                  |
| Область прорисовки               | Render Target               | RT_ или RTT_ |            | Выберите одно. Лучше RT_         |
| Область прорисовки текстуры-куба | Cube Render Target          | RTC_         |            |                                  |
| Профиль освещения                | Texture Light Profile       | TLP          |            |                                  |

<a name="anc-textures-packing"</a>
<a name="1.2.6.1"></a>
#### 1.2.6.1 Упаковка текстур ![#](https://img.shields.io/badge/lint-unsupported-red.svg)
Упаковка сразу нескольких слоёв информации в одну текстуру — стандартная практика. Примером служит упаковка текстур Emissive, Roughness, Ambient Occlusion как красный, зелёный и синий каналы одной текстуры. Чтобы построить суффикс для таких текстур, просто последовательно запишите суффиксы отдельных масок из таблицы выше, напр. `_ERO`.

> Часто альфа-канал включают в карту Diffuse/Альбедо. Так как это стандартная практика, добавлять суффикс `A` в суффикс `_D` необязательно.
Упаковывать сразу 4 канала информации в одну текстуру (в RGBA) не рекомендуется, за исключением использования канала A как Alpha вместе с картой Diffuse/Альбедо.

<a name="anc-misc"></a>
<a name="1.2.7"></a>
### 1.2.7 Разное ![#](https://img.shields.io/badge/lint-supported-green.svg)

| Тип ассета (RU)         | Тип ассета (EN)         | Префикс    | Суффикс    | Примечания                       |
| ----------------------- | ----------------------- | ---------- | ---------- | -------------------------------- |
| Анимированное векторное поле| Animated Vector Field| VFA_      |            |                                  |
| Анимация камеры         | Camera Anim             | CA_        |            |                                  |
| Цветовая кривая         | Color Curve             | Curve_     | _Color     |                                  |
| Табличная кривая        | Curve Table             | Curve_     | _Table     |                                  |
| Набор данных            | Data Asset              | *_         |            | Префикс основывается на классе   |
| Таблица данных          | Data Table              | DT_        |            |                                  |
| Вещественная кривая     | Float Curve             | Curve_     | _Float     |                                  |
| Тип растительности      | Foliage Type            | FT_        |            |                                  |
| Эффект физического отклика| Force Feedback Effect | FFE_       |            |                                  |
| Тип растительности      | Landscape Grass Type    | LG_        |            |                                  |
| Слой ландшафта          | Landscape Layer         | LL_        |            |                                  |
| Данные Matinee          | Matinee Data            | Matinee_   |            |                                  |
| Медиапроигрыватель      | Media Player            | MP_        |            |                                  |
| Библиотека объектов     | Object Library          | OL_        |            |                                  |
| Перенаправление         | Redirector              |            |            | Перенаправление должно быть исправлено при первой возможности |
| Атлас спрайтов          | Sprite Sheet            | SS_        |            |                                  |
| Статичное векторное поле| Static Vector Field     | VF_        |            |                                  |
| Настройка тач-интерфейса| Touch Interface Setup   | TI_        |            |                                  |
| Векторная кривая        | Vector Curve            | Curve_     | _Vector    |                                  |

<a name="anc-paper2d"></a>
<a name="1.2.8"></a>
### 1.2.8 Paper 2D ![#](https://img.shields.io/badge/lint-supported-green.svg)